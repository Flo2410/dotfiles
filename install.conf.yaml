- defaults:
    link:
      create: true
      relink: true

- clean: ["~"]

- shell:
    - [git submodule update --init --recursive, Installing submodules]
    - ['if [ $SHELL != "/bin/zsh" ]; then apt install -y zsh; fi', Installing zsh]
    - ['if [ $SHELL != "/bin/zsh" ]; then chsh -s $(which zsh); fi', Making zsh the default shell]
    - [
        'if [ ! -d "$HOME/.oh-my-zsh" ]; then sh -c "$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)" "" --unattended; fi',
        Installing oh-my-zsh,
      ]
# - [
#     "git clone --depth=1 https://github.com/romkatv/powerlevel10k.git ${ZSH_CUSTOM:-$HOME/.oh-my-zsh/custom}/themes/powerlevel10k",
#     Installing powerlevel10k theme,
#   ]
# - [. ~/.zshrc, Reload zsh]

- link:
    # .config dir
    ~/.config/:
      glob: true
      path: config/*
      exclude: [config/vscode]

    # VS Code
    ~/.config/Code/User/:
      glob: true
      path: config/vscode/*

    # ZSH
    ~/.zshrc:
      path: zsh/.zshrc
      force: true
    ~/.oh-my-zsh/custom:
      glob: true
      path: zsh/omz/custom/*
      force: true
# - create:
#     ~/.ssh:
#       mode: 0700

